(function(e,f){typeof define=="function"?define(f):typeof module!="undefined"?module.exports=f():this[e]=this.domReady=f()})("domready",function(e){function f(e){for(z=1;e=p.shift();)e()}var p=[],n,h=document,w=h.documentElement,l=w.doScroll,z=/^loade|c/.test(h.readyState);h.addEventListener&&h.addEventListener("DOMContentLoaded",n=function(){h.removeEventListener("DOMContentLoaded",n,false);f()},false);l&&h.attachEvent("onreadystatechange",n=function(){/^c/.test(h.readyState)&&(h.detachEvent("onreadystatechange",
n),f())});return e=l?function(f){self!=top?z?f():p.push(f):function(){try{w.doScroll("left")}catch(h){return setTimeout(function(){e(f)},50)}f()}()}:function(e){z?e():p.push(e)}});
(function(e,f){typeof module!="undefined"?module.exports=f():typeof define=="function"&&typeof define.amd=="object"?define(f):this[e]=f()})("qwery",function(){function e(){this.c={}}function f(a){return R.g(a)||R.s(a,RegExp("(^|\\s+)"+a+"(\\s+|$)"))}function p(a,c){for(var k=0,d=a.length;k<d;k++)c.call(null,a[k])}function n(a){var c=[];p(a,function(a){r(a)?c=c.concat(a):c[c.length]=a});return c}function h(a){for(var c=0,k=a.length,d=[];c<k;c++)d[c]=a[c];return d}function w(a){for(;a=a.previousSibling;)if(a.nodeType==
1)break;return a}function l(a){return a.match(P)}function z(a,c,k,d,b,g,v,F,i,m,y){var J,e,M;if(c&&this.tagName.toLowerCase()!==c)return false;if(k&&(J=k.match(E))&&J[1]!==this.id)return false;if(k&&(M=k.match(O)))for(a=M.length;a--;)if(!f(M[a].slice(1)).test(this.className))return false;if(i&&B.pseudos[i]&&!B.pseudos[i](this,y))return false;if(d&&!v)for(e in i=this.attributes,i)if(Object.prototype.hasOwnProperty.call(i,e)&&(i[e].name||e)==b)return this;return d&&!x(g,S(this,b)||"",v)?false:this}
function t(a){return Q.g(a)||Q.s(a,a.replace(i,"\\$1"))}function x(a,c,k){switch(a){case "=":return c==k;case "^=":return c.match(I.g("^="+k)||I.s("^="+k,RegExp("^"+t(k))));case "$=":return c.match(I.g("$="+k)||I.s("$="+k,RegExp(t(k)+"$")));case "*=":return c.match(I.g(k)||I.s(k,RegExp(t(k))));case "~=":return c.match(I.g("~="+k)||I.s("~="+k,RegExp("(?:^|\\s+)"+t(k)+"(?:\\s+|$)")));case "|=":return c.match(I.g("|="+k)||I.s("|="+k,RegExp("^"+t(k)+"(-|$)")))}return 0}function G(a){var c=[],d=[],b,g,
v,i,S,m=k.g(a)||k.s(a,a.split(q)),J=a.match(y);if(!m.length)return c;m=m.slice(0);a=m.pop();v=m.length&&(b=m[m.length-1].match(F))?o[K](b[1]):o;if(!v)return c;i=l(a);g=v.nodeType!==9&&J&&/^[+~]$/.test(J[J.length-1])?function(a){for(;v=v.nextSibling;)v.nodeType==1&&(i[1]?i[1]==v.tagName.toLowerCase():1)&&(a[a.length]=v);return a}([]):v[s](i[1]||"*");for(b=0,a=g.length;b<a;b++)if(S=z.apply(g[b],i))c[c.length]=S;if(!m.length)return c;p(c,function(a){C(a,m,J)&&(d[d.length]=a)});return d}function C(a,
c,k,d){function b(a,d,v){for(;v=T[k[d]](v,a);)if(H(v)&&(found=z.apply(v,l(c[d]))))if(d){if(g=b(v,d-1,v))return g}else return v}var g;return(g=b(a,c.length-1,a))&&(!d||v(g,d))}function H(a){return a&&typeof a==="object"&&a.nodeType&&(a.nodeType==1||a.nodeType==9)}function L(a){var c=[],k,d;k=0;a:for(;k<a.length;k++){for(d=0;d<c.length;d++)if(c[d]==a[k])continue a;c[c.length]=a[k]}return c}function r(a){return typeof a==="object"&&isFinite(a.length)}function B(a,c){var k,d,g;g=c?typeof c=="string"?
B(c)[0]:r(c)?c[0]:c:o;if(!g||!a)return[];if(a===window||H(a))return!c||a!==window&&H(g)&&v(a,g)?[a]:[];if(a&&r(a))return n(a);if(k=a.match(M)){if(k[1])return(d=o[K](k[1]))?[d]:[];if(k[2])return h(g[s](k[2]));if(J&&k[3])return h(g[b](k[3]))}return U(a,g)}function N(c,k){return function(d){var b,g;if(a.test(d)){if(c!==o){if(!(g=b=c.getAttribute("id")))c.setAttribute("id",g="__qwerymeupscotty");k(o,"#"+g+d);b||c.removeAttribute("id")}}else d.length&&k(c,d)}}var D=this,o=document,A=D.qwery,u=o.documentElement,
b="getElementsByClassName",s="getElementsByTagName",K="getElementById",E=/#([\w\-]+)/,O=/\.[\w\-]+/g,F=/^#([\w\-]+)$/,m=/^([\w]+)?\.([\w\-]+)$/,M=RegExp(F.source+"|"+/^([\w\-]+)$/.source+"|"+/^\.([\w\-]+)$/.source),a=/(^|,)\s*[>~+]/,c=/^\s+|\s*([,\s\+\~>]|$)\s*/g,d=/[\s\>\+\~]/,g=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,i=/([.*+?\^=!:${}()|\[\]\/\\])/g,y=RegExp("("+d.source+")"+g.source,"g"),q=RegExp(d.source+g.source),P=RegExp(/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/.source+
"("+/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/.source+")?("+/:([\w\-]+)(\(['"]?([\s\w\+\-]+)['"]?\))?/.source+")?"),T={" ":function(a){return a&&a!==u&&a.parentNode},">":function(a,c){return a&&a.parentNode==c.parentNode&&a.parentNode},"~":function(a){return a&&a.previousSibling},"+":function(a,c,k,d){return!a?false:(k=w(a))&&(d=w(c))&&k==d&&k}};e.prototype={g:function(a){return this.c[a]||void 0},s:function(a,c){return this.c[a]=c}};var R=new e,Q=
new e,I=new e,k=new e,v="compareDocumentPosition"in u?function(a,c){return(c.compareDocumentPosition(a)&16)==16}:"contains"in u?function(a,c){c=c==o||c==window?u:c;return c!==a&&c.contains(a)}:function(a,c){for(;a=a.parentNode;)if(a===c)return 1;return 0},S=function(){var a=o.createElement("p");return(a.innerHTML='<a href="#x">x</a>')&&a.firstChild.getAttribute("href")!="#x"?function(a,c){return c==="class"?a.className:c==="href"||c==="src"?a.getAttribute(c,2):a.getAttribute(c)}:function(a,c){return a.getAttribute(c)}}(),
J;try{J=o[b]&&o.querySelector&&o.querySelectorAll&&o.querySelectorAll(":nth-of-type(1)").length}catch(V){J=false}var U=J?function(c,k){var d=[],b,g;if(k===o||!a.test(c))return h(k.querySelectorAll(c));p(b=c.split(","),N(k,function(a,c){g=a.querySelectorAll(c);g.length==1?d[d.length]=g.item(0):g.length&&(d=d.concat(h(g)))}));return b.length>1&&d.length>1?L(d):d}:function(a,k){var d=[],b,g,i,a=a.replace(c,"$1");if(b=a.match(m)){if(k.querySelectorAll)return h(k.querySelectorAll(a));i=f(b[2]);items=k[s](b[1]||
"*");for(b=0,g=items.length;b<g;b++)i.test(items[b].className)&&(d[d.length]=items[b]);return d}p(i=a.split(","),N(k,function(a,c){for(var b=0,g=G(c),i=g.length;b<i;b++)if(a===o||v(g[b],k))d[d.length]=g[b]}));return i.length>1&&d.length>1?L(d):d};B.uniq=L;B.is=function(a,c,d){if(H(c))return a==c;if(r(c))return!!~n(c).indexOf(a);for(var b=c.split(","),g;c=b.pop();)if(g=k.g(c)||k.s(c,c.split(q)),c=c.match(y),g=g.slice(0),z.apply(a,l(g.pop()))&&(!g.length||C(a,g,c,d)))return true};B.pseudos={};B.noConflict=
function(){D.qwery=A;return this};return B});
(function(e,f){typeof module!="undefined"?module.exports=f():typeof define=="function"&&typeof define.amd=="object"?define(f):this[e]=f()})("bean",function(){function e(b){var b=b.relatedTarget,m;if(b){var e;if(e=b!=this)if(e=b.prefix!="xul")if(e=!/document/.test(this.toString())){a:for(b=b.parentNode;b!==null;){if(b==this){m=true;break a}b=b.parentNode}e=!m}m=e}else m=b===null;return m}var f=window,p=1,n={},h={},w=/over|out/,l=/[^\.]*(?=\..*)\.|.*/,z=/\..*/,t=((document||{}).documentElement||{}).addEventListener,
x=t?"addEventListener":"attachEvent",G=function(b,m){return b.__uid=m&&m+"::"+p++||b.__uid||p++},C=function(b){b=G(b);return n[b]=n[b]||{}},H=t?function(b,m,e,a){b[a?"addEventListener":"removeEventListener"](m,e,false)}:function(b,m,e,a,c){c&&a&&b["_on"+c]===null&&(b["_on"+c]=0);b[a?"attachEvent":"detachEvent"]("on"+m,e)},L=function(b,m,e){return function(a){a=s(a||((this.ownerDocument||this.document||this).parentWindow||f).event);return m.apply(b,[a].concat(e))}},r=function(b,m,e,a,c){return function(d){if(a?
a.apply(this,arguments):t||d&&d.propertyName=="_on"+e||!d)d=d?s(d||((this.ownerDocument||this.document||this).parentWindow||f).event):null,m.apply(b,Array.prototype.slice.call(arguments,d?0:1).concat(c))}},B=function(b,m,e,a){var c=m.replace(z,""),d=C(b),d=d[c]||(d[c]={}),g=e,m=G(e,m.replace(l,""));if(d[m])return b;var i=E[c];i&&(e=i.condition?r(b,e,c,i.condition):e,c=i.base||c);e=(i=K[c])?L(b,e,a):r(b,e,c,false,a);i=t||i;if(c=="unload")var y=e,e=function(){N(b,c,e)&&y()};b[x]&&H(b,i?c:"propertychange",
e,true,!i&&c);d[m]=e;e.__uid=m;e.__originalFn=g;return c=="unload"?b:h[G(b)]=b},N=function(b,e,f){var i;function a(a){if(f=d[g][a])delete d[g][a],b[x]&&(g=E[g]?E[g].base:g,a=t||K[g],H(b,a?g:"propertychange",f,false,!a&&g))}var c,d=C(b),g=e.replace(z,"");if(!d||!d[g])return b;i=(c=e.replace(l,""))?c.split("."):[f.__uid],e=i;a(c);for(c=e.length;c--;a(e[c]));return b},D=function(b,e,f){return function(a){for(var c=typeof b=="string"?f(b,this):b,d=a.target;d&&d!=this;d=d.parentNode)for(var g=c.length;g--;)if(c[g]==
d)return e.apply(d,arguments)}},o=function(b,e,f,a,c){if(typeof e=="object"&&!f)for(var d in e)e.hasOwnProperty(d)&&o(b,d,e[d]);else{d=typeof f=="string";for(var g=(d?f:e).split(" "),f=d?D(e,a,c):f,i=g.length;i--;)B(b,g[i],f,Array.prototype.slice.call(arguments,d?4:3))}return b},A=function(b,e,f){var a,c,d,g=typeof e=="string",i=g&&e.replace(l,""),y=N,q=C(b),i=i&&i.split(".");if(g&&/\s/.test(e)){e=e.split(" ");for(c=e.length-1;A(b,e[c])&&c--;);return b}d=g?e.replace(z,""):e;if(!q||i||g&&!q[d]){for(a in q)if(q.hasOwnProperty(a))for(c in q[a])for(f=
i.length;f--;)q[a].hasOwnProperty(c)&&RegExp("^"+i[f]+"::\\d*(\\..*)?$").test(c)&&y(b,[a,c].join("."));return b}if(typeof f=="function")y(b,d,f);else if(i)y(b,e);else for(a in y=d?y:A,c=g&&d,d=d?f||q[d]||d:q,d)d.hasOwnProperty(a)&&(y(b,c||a,d[a]),delete d[a]);return b},u=t?function(b,e,h){evt=document.createEvent(b?"HTMLEvents":"UIEvents");evt[b?"initEvent":"initUIEvent"](e,true,true,f,1);h.dispatchEvent(evt)}:function(b,e,f){b?f.fireEvent("on"+e,document.createEventObject()):f["_on"+e]++},b=function(e,
f,h){var a=C(f),c;G(e);a=h?a[h]:a;for(c in a)a.hasOwnProperty(c)&&(h?o:b)(e,h||f,h?a[c].__originalFn:c);return e},s=function(b){var e={};if(!b)return e;var f=b.type,a=b.target||b.srcElement;e.preventDefault=s.preventDefault(b);e.stopPropagation=s.stopPropagation(b);e.target=a&&a.nodeType==3?a.parentNode:a;if(~f.indexOf("key"))e.keyCode=b.which||b.keyCode;else if(/click|mouse|menu/i.test(f)){e.rightClick=b.which==3||b.button==2;e.pos={x:0,y:0};if(b.pageX||b.pageY)e.clientX=b.pageX,e.clientY=b.pageY;
else if(b.clientX||b.clientY)e.clientX=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.clientY=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;w.test(f)&&(e.relatedTarget=b.relatedTarget||b[(f=="mouseover"?"from":"to")+"Element"])}for(var c in b)c in e||(e[c]=b[c]);return e};s.preventDefault=function(b){return function(){b.preventDefault?b.preventDefault():b.returnValue=false}};s.stopPropagation=function(b){return function(){b.stopPropagation?b.stopPropagation():
b.cancelBubble=true}};var K={click:1,dblclick:1,mouseup:1,mousedown:1,contextmenu:1,mousewheel:1,DOMMouseScroll:1,mouseover:1,mouseout:1,mousemove:1,selectstart:1,selectend:1,keydown:1,keypress:1,keyup:1,orientationchange:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,focus:1,blur:1,change:1,reset:1,select:1,submit:1,load:1,unload:1,beforeunload:1,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1},E={mouseenter:{base:"mouseover",
condition:e},mouseleave:{base:"mouseout",condition:e},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}},O={add:o,remove:A,clone:b,fire:function(b,e,f){var a,c,d,g=e.split(" ");for(c=g.length;c--;){var e=g[c].replace(z,""),i=K[e],y=g[c].replace(l,""),q=C(b)[e];if(y){y=y.split(".");for(a=y.length;a--;)for(d in q)q.hasOwnProperty(d)&&RegExp("^"+y[a]+"::\\d*(\\..*)?$").test(d)&&q[d].apply(b,[false].concat(f))}else if(!f&&b[x])u(i,e,b);else for(a in q)q.hasOwnProperty(a)&&
q[a].apply(b,[false].concat(f))}return b}};f.attachEvent&&o(f,"unload",function(){for(var b in h)if(h.hasOwnProperty(b)){var e=A(h[b]).__uid;e&&(delete h[e],delete n[e])}f.CollectGarbage&&CollectGarbage()});O.noConflict=function(){context.bean=old;return this};return O});
(function(){function e(a,c,d){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a._chain)a=a._wrapped;if(c._chain)c=c._wrapped;if(b.isFunction(a.isEqual))return a.isEqual(c);if(b.isFunction(c.isEqual))return c.isEqual(a);var g=typeof a;if(g!=typeof c)return false;if(!a!=!c)return false;if(b.isNaN(a))return b.isNaN(c);var i=b.isString(a),f=b.isString(c);if(i||f)return i&&f&&String(a)==String(c);i=b.isNumber(a);f=b.isNumber(c);if(i||f)return i&&f&&+a==+c;i=b.isBoolean(a);f=b.isBoolean(c);
if(i||f)return i&&f&&+a==+c;i=b.isDate(a);f=b.isDate(c);if(i||f)return i&&f&&a.getTime()==c.getTime();i=b.isRegExp(a);f=b.isRegExp(c);if(i||f)return i&&f&&a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase;if(g!="object")return false;if(a.length!==c.length)return false;if(a.constructor!==c.constructor)return false;for(g=d.length;g--;)if(d[g]==a)return true;d.push(a);var g=0,i=true,q;for(q in a)if(x.call(a,q)&&(g++,!(i=x.call(c,q)&&e(a[q],c[q],d))))break;if(i){for(q in c)if(x.call(c,
q)&&!g--)break;i=!g}d.pop();return i}var f=this,p=f._,n={},h=Array.prototype,w=Object.prototype,l=h.slice,z=h.unshift,t=w.toString,x=w.hasOwnProperty,G=h.forEach,C=h.map,H=h.reduce,L=h.reduceRight,r=h.filter,B=h.every,N=h.some,D=h.indexOf,o=h.lastIndexOf,w=Array.isArray,A=Object.keys,u=Function.prototype.bind,b=function(a){return new F(a)};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=b;exports._=b}else typeof define==="function"&&define.amd?
define("underscore",function(){return b}):f._=b;b.VERSION="1.2.1";var s=b.each=b.forEach=function(a,c,b){if(a!=null)if(G&&a.forEach===G)a.forEach(c,b);else if(a.length===+a.length)for(var g=0,e=a.length;g<e;g++){if(g in a&&c.call(b,a[g],g,a)===n)break}else for(g in a)if(x.call(a,g)&&c.call(b,a[g],g,a)===n)break};b.map=function(a,c,b){var g=[];if(a==null)return g;if(C&&a.map===C)return a.map(c,b);s(a,function(a,e,f){g[g.length]=c.call(b,a,e,f)});return g};b.reduce=b.foldl=b.inject=function(a,c,d,g){var e=
d!==void 0;a==null&&(a=[]);if(H&&a.reduce===H)return g&&(c=b.bind(c,g)),e?a.reduce(c,d):a.reduce(c);s(a,function(a,b,f){e?d=c.call(g,d,a,b,f):(d=a,e=true)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,g){a==null&&(a=[]);if(L&&a.reduceRight===L)return g&&(c=b.bind(c,g)),d!==void 0?a.reduceRight(c,d):a.reduceRight(c);a=(b.isArray(a)?a.slice():b.toArray(a)).reverse();return b.reduce(a,c,d,g)};b.find=b.detect=function(a,c,b){var g;
K(a,function(a,e,f){if(c.call(b,a,e,f))return g=a,true});return g};b.filter=b.select=function(a,c,b){var g=[];if(a==null)return g;if(r&&a.filter===r)return a.filter(c,b);s(a,function(a,e,f){c.call(b,a,e,f)&&(g[g.length]=a)});return g};b.reject=function(a,c,b){var g=[];if(a==null)return g;s(a,function(a,e,f){c.call(b,a,e,f)||(g[g.length]=a)});return g};b.every=b.all=function(a,c,b){var g=true;if(a==null)return g;if(B&&a.every===B)return a.every(c,b);s(a,function(a,e,f){if(!(g=g&&c.call(b,a,e,f)))return n});
return g};var K=b.some=b.any=function(a,c,d){var c=c||b.identity,g=false;if(a==null)return g;if(N&&a.some===N)return a.some(c,d);s(a,function(a,b,e){if(g|=c.call(d,a,b,e))return n});return!!g};b.include=b.contains=function(a,c){var b=false;if(a==null)return b;return D&&a.indexOf===D?a.indexOf(c)!=-1:b=K(a,function(a){if(a===c)return true})};b.invoke=function(a,c){var d=l.call(arguments,2);return b.map(a,function(a){return(c.call?c||a:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};
b.max=function(a,c,d){if(!c&&b.isArray(a))return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var g={computed:-Infinity};s(a,function(a,b,e){b=c?c.call(d,a,b,e):a;b>=g.computed&&(g={value:a,computed:b})});return g.value};b.min=function(a,c,d){if(!c&&b.isArray(a))return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity};s(a,function(a,b,f){b=c?c.call(d,a,b,f):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var b=[],d;
s(a,function(a,e){e==0?b[0]=a:(d=Math.floor(Math.random()*(e+1)),b[e]=b[d],b[d]=a)});return b};b.sortBy=function(a,c,d){return b.pluck(b.map(a,function(a,b,e){return{value:a,criteria:c.call(d,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")};b.groupBy=function(a,c){var d={},e=b.isFunction(c)?c:function(a){return a[c]};s(a,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)});return d};b.sortedIndex=function(a,c,d){d||(d=b.identity);for(var e=0,f=a.length;e<
f;){var h=e+f>>1;d(a[h])<d(c)?e=h+1:f=h}return e};b.toArray=function(a){return!a?[]:a.toArray?a.toArray():b.isArray(a)?l.call(a):b.isArguments(a)?l.call(a):b.values(a)};b.size=function(a){return b.toArray(a).length};b.first=b.head=function(a,b,d){return b!=null&&!d?l.call(a,0,b):a[0]};b.initial=function(a,b,d){return l.call(a,0,a.length-(b==null||d?1:b))};b.last=function(a,b,d){return b!=null&&!d?l.call(a,a.length-b):a[a.length-1]};b.rest=b.tail=function(a,b,d){return l.call(a,b==null||d?1:b)};b.compact=
function(a){return b.filter(a,function(a){return!!a})};b.flatten=function(a,c){return b.reduce(a,function(a,e){if(b.isArray(e))return a.concat(c?e:b.flatten(e));a[a.length]=e;return a},[])};b.without=function(a){return b.difference(a,l.call(arguments,1))};b.uniq=b.unique=function(a,c,d){var d=d?b.map(a,d):a,e=[];b.reduce(d,function(d,f,h){if(0==h||(c===true?b.last(d)!=f:!b.include(d,f)))d[d.length]=f,e[e.length]=a[h];return d},[]);return e};b.union=function(){return b.uniq(b.flatten(arguments,true))};
b.intersection=b.intersect=function(a){var c=l.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a,c){return b.filter(a,function(a){return!b.include(c,a)})};b.zip=function(){for(var a=l.call(arguments),c=b.max(b.pluck(a,"length")),d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,""+e);return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e;if(d)return d=b.sortedIndex(a,c),a[d]===c?d:-1;if(D&&a.indexOf===D)return a.indexOf(c);
for(d=0,e=a.length;d<e;d++)if(a[d]===c)return d;return-1};b.lastIndexOf=function(a,b){if(a==null)return-1;if(o&&a.lastIndexOf===o)return a.lastIndexOf(b);for(var d=a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){arguments.length<=1&&(b=a||0,a=0);for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,h=Array(e);f<e;)h[f++]=a,a+=d;return h};var E=function(){};b.bind=function(a,c){var d,e;if(a.bind===u&&u)return u.apply(a,l.call(arguments,1));if(!b.isFunction(a))throw new TypeError;
e=l.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(c,e.concat(l.call(arguments)));E.prototype=a.prototype;var b=new E,f=a.apply(b,e.concat(l.call(arguments)));return Object(f)===f?f:b}};b.bindAll=function(a){var c=l.call(arguments,1);c.length==0&&(c=b.functions(a));s(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var b=c.apply(this,arguments);return x.call(d,b)?d[b]:d[b]=a.apply(this,arguments)}};b.delay=
function(a,b){var d=l.call(arguments,2);return setTimeout(function(){return a.apply(a,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(l.call(arguments,1)))};b.throttle=function(a,c){var d,e,f,h,l;l=b.debounce(function(){h=false},c);return function(){e=this;f=arguments;var b;d||(d=setTimeout(function(){d=null;a.apply(e,f);l()},c));h||a.apply(e,f);l&&l();h=true}};b.debounce=function(a,b){var d;return function(){var e=this,f=arguments;clearTimeout(d);d=setTimeout(function(){d=null;a.apply(e,
f)},b)}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;return d=a.apply(this,arguments)}};b.wrap=function(a,b){return function(){var d=[a].concat(l.call(arguments));return b.apply(this,d)}};b.compose=function(){var a=l.call(arguments);return function(){for(var b=l.call(arguments),d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=A||function(a){if(a!==Object(a))throw new TypeError("Invalid object");
var b=[],d;for(d in a)x.call(a,d)&&(b[b.length]=d);return b};b.values=function(a){return b.map(a,b.identity)};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){s(l.call(arguments,1),function(b){for(var d in b)b[d]!==void 0&&(a[d]=b[d])});return a};b.defaults=function(a){s(l.call(arguments,1),function(b){for(var d in b)a[d]==null&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},
a)};b.tap=function(a,b){b(a);return a};b.isEqual=function(a,b){return e(a,b,[])};b.isEmpty=function(a){if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(x.call(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType==1)};b.isArray=w||function(a){return t.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};b.isArguments=t.call(arguments)=="[object Arguments]"?function(a){return t.call(a)=="[object Arguments]"}:function(a){return!(!a||!x.call(a,
"callee"))};b.isFunction=function(a){return t.call(a)=="[object Function]"};b.isString=function(a){return t.call(a)=="[object String]"};b.isNumber=function(a){return t.call(a)=="[object Number]"};b.isNaN=function(a){return a!==a};b.isBoolean=function(a){return a===true||a===false||t.call(a)=="[object Boolean]"};b.isDate=function(a){return t.call(a)=="[object Date]"};b.isRegExp=function(a){return t.call(a)=="[object RegExp]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===
void 0};b.noConflict=function(){f._=p;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=0;e<a;e++)b.call(d,e)};b.escape=function(a){return(""+a).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.mixin=function(a){s(b.functions(a),function(c){M(c,b[c]=a[c])})};var O=0;b.uniqueId=function(a){var b=O++;return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,
interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};b.template=function(a,c){var d=b.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d.escape,function(a,b){return"',_.escape("+b.replace(/\\'/g,"'")+"),'"}).replace(d.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(d.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,
"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",d=new Function("obj",d);return c?d(c):d};var F=function(a){this._wrapped=a};b.prototype=F.prototype;var m=function(a,c){return c?b(a).chain():a},M=function(a,c){F.prototype[a]=function(){var a=l.call(arguments);z.call(a,this._wrapped);return m(c.apply(b,a),this._chain)}};b.mixin(b);s("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=h[a];F.prototype[a]=function(){b.apply(this._wrapped,arguments);return m(this._wrapped,
this._chain)}});s(["concat","join","slice"],function(a){var b=h[a];F.prototype[a]=function(){return m(b.apply(this._wrapped,arguments),this._chain)}});F.prototype.chain=function(){this._chain=true;return this};F.prototype.value=function(){return this._wrapped}})();
(function(e,f){typeof module!="undefined"?module.exports=f():typeof define=="function"&&define.amd?define(e,f):this[e]=f()})("bonzo",function(){function e(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c||a[d],a[d],d,a);return a}function f(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function p(a){a[q]("data-node-uid")||a[y]("data-node-uid",++d);uid=a[q]("data-node-uid");return c[uid]||(c[uid]={})}function n(a){try{return a==="true"?true:a==="false"?false:a==="null"?null:!isNaN(a)?
parseFloat(a):a}catch(b){}}function h(a,b,c,d){for(d=0,j=a.length;d<j;++d)if(b.call(c,a[d],d,a))return true;return false}function w(a){a=="transform"&&(a=P.transform)||/^transform-?[Oo]rigin$/.test(a)&&(a=P.transform+"Origin")||a=="float"&&(a=P.cssFloat);return a?f(a):null}function l(a,c,d){var f=0,g=c||this,h=[],a=b&&typeof a=="string"&&a.charAt(0)!="<"?b(a):a;e(C(a),function(a){e(g,function(b){if(!b[u]||b[u]&&!b[u][u]){var c=b.cloneNode(true);g.$&&g.cloneEvents&&g.$(c).cloneEvents(b);b=c}d(a,b);
h[f]=b;f++})},this);e(h,function(a,b){g[b]=a});g.length=f;return g}function z(a,b){return RegExp("(^|\\s+)"+b+"(\\s+|$)").test(a.className)}function t(a,b){a.className=Q(a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "))}function x(a,b){return typeof b=="function"?b(a):b}function G(a){this.length=0;if(a){a=typeof a!=="string"&&!a.nodeType&&typeof a.length!=="undefined"?a:[a];this.length=a.length;for(var b=0;b<a.length;b++)this[b]=a[b]}}function C(a){return typeof a=="string"?r.create(a):a&&
a.nodeName&&a.nodeType==1?[a]:a}function H(a,b,c){var d=this[0];if(a==null&&b==null)return(L(d)?{x:D.pageXOffset||A.scrollLeft,y:D.pageYOffset||A.scrollTop}:{x:d.scrollLeft,y:d.scrollTop})[c];L(d)?D.scrollTo(a,b):(a!=null&&(d.scrollLeft=a),b!=null&&(d.scrollTop=b));return this}function L(a){return a===D||/^(?:body|html)$/i.test(a.tagName)}function r(a,b){return new G(a,b)}var B=this,N=B.bonzo,D=window,o=D.document,A=o.documentElement,u="parentNode",b=null,s=/^checked|value|selected$/,K=/select|fieldset|table|tbody|tfoot|td|tr|colgroup/i,
E=["<table>","</table>",1],O=["<table><tbody><tr>","</tr></tbody></table>",3],F=["<select>","</select>",1],m={thead:E,tbody:E,tfoot:E,colgroup:E,caption:E,tr:["<table><tbody>","</tbody></table>",2],th:O,td:O,col:["<table><colgroup>","</colgroup></table>",2],fieldset:["<form>","</form>",1],legend:["<form><fieldset>","</fieldset></form>",2],option:F,optgroup:F},M=/^checked|selected$/,a=/msie/i.test(navigator.userAgent),c=[],d=0,g=/^-?[\d\.]+$/,i=/^data-(.+)$/,y="setAttribute",q="getAttribute",P=function(){var a=
o.createElement("p");a.innerHTML='<a href="#x">x</a><table style="float:left;"></table>';var b=a.getElementsByTagName("a")[0][q]("href")!="#x",c=a.getElementsByTagName("tbody").length!==0,d=o.defaultView&&o.defaultView.getComputedStyle,e=a.getElementsByTagName("table")[0].style.styleFloat?"styleFloat":"cssFloat",f;a:{var g=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],h;for(h=0;h<g.length;h++)if(g[h]in a.style){f=g[h];break a}}return{hrefExtended:b,autoTbody:c,computedStyle:d,
cssFloat:e,transform:f}}(),T=/(^\s*|\s*$)/g,R={lineHeight:1,zoom:1,zIndex:1,opacity:1},Q=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(T,"")},I=P.computedStyle?function(a,b){var c=null,d=o.defaultView.getComputedStyle(a,"");d&&(c=d[b]);return a.style[b]||c}:a&&A.currentStyle?function(a,b){if(b=="opacity"){var c=100;try{c=a.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(d){try{c=a.filters("alpha").opacity}catch(e){}}return c/100}c=a.currentStyle?a.currentStyle[b]:
null;return a.style[b]||c}:function(a,b){return a.style[b]};G.prototype={get:function(a){return this[a]},each:function(a,b){return e(this,a,b)},map:function(a,b){var c=[],d,e;for(e=0;e<this.length;e++)d=a.call(this,this[e],e),b?b(d)&&c.push(d):c.push(d);return c},first:function(){return r(this.length?this[0]:[])},last:function(){return r(this.length?this[this.length-1]:[])},html:function(a,b){function c(b){for(;b.firstChild;)b.removeChild(b.firstChild);e(C(a),function(a){b.appendChild(a)})}var d=
b?A.textContent===void 0?"innerText":"textContent":"innerHTML",f;return typeof a!=="undefined"?this.each(function(e){!b&&(f=e.tagName.match(K))?c(e,f[0]):e[d]=a}):this[0]?this[0][d]:""},text:function(a){return this.html(a,1)},addClass:function(a){return this.each(function(b){if(!z(b,x(b,a))){var c=x(b,a);b.className=Q(b.className+" "+c)}})},removeClass:function(a){return this.each(function(b){z(b,x(b,a))&&t(b,x(b,a))})},hasClass:function(a){return h(this,function(b){return z(b,a)})},toggleClass:function(a,
b){return this.each(function(c){typeof b!=="undefined"?b?c.className=Q(c.className+" "+a):t(c,a):z(c,a)?t(c,a):c.className=Q(c.className+" "+a)})},show:function(a){return this.each(function(b){b.style.display=a||""})},hide:function(){return this.each(function(a){a.style.display="none"})},append:function(a){return this.each(function(b){e(C(a),function(a){b.appendChild(a)})})},prepend:function(a){return this.each(function(b){var c=b.firstChild;e(C(a),function(a){b.insertBefore(a,c)})})},appendTo:function(a,
b){return l.call(this,a,b,function(a,b){a.appendChild(b)})},prependTo:function(a,b){return l.call(this,a,b,function(a,b){a.insertBefore(b,a.firstChild)})},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},related:function(a){return this.map(function(b){for(b=b[a];b&&b.nodeType!==1;)b=b[a];return b||0},function(a){return a})},before:function(a){return this.each(function(b){e(r.create(a),function(a){b[u].insertBefore(a,b)})})},after:function(a){return this.each(function(b){e(r.create(a),
function(a){b[u].insertBefore(a,b.nextSibling)})})},insertBefore:function(a,b){return l.call(this,a,b,function(a,b){a[u].insertBefore(b,a)})},insertAfter:function(a,b){return l.call(this,a,b,function(a,b){var c=a.nextSibling;c?a[u].insertBefore(b,c):a[u].appendChild(b)})},replaceWith:function(a){return this.each(function(b){b.parentNode.replaceChild(r.create(a)[0],b)})},css:function(b,c,d){if(c===void 0&&typeof b=="string"){c=this[0];if(!c)return null;return c===o||c===D?(d=c===o?r.doc():r.viewport(),
b=="width"?d.width:b=="height"?d.height:""):(b=w(b))?I(c,b):null}var e=b;typeof b=="string"&&(e={},e[b]=c);if(a&&e.opacity)e.filter="alpha(opacity="+e.opacity*100+")",e.zoom=b.zoom||1,delete e.opacity;return this.each(function(a,b,c){for(var d in e)e.hasOwnProperty(d)&&(c=e[d],(b=w(d))&&g.test(c)&&!(b in R)&&(c+="px"),a.style[b]=x(a,c))})},offset:function(a,b){if(typeof a=="number"||typeof b=="number")return this.each(function(c){var d=r(c),e=d.css("position"),f=d.offset(),g=e=="relative",h=[parseInt(d.css("left"),
10),parseInt(d.css("top"),10)];e=="static"&&d.css("position","relative");isNaN(h[0])&&(h[0]=g?0:c.offsetLeft);isNaN(h[1])&&(h[1]=g?0:c.offsetTop);a!=null&&(c.style.left=a-f.left+h[0]+"px");b!=null&&(c.style.top=b-f.top+h[1]+"px")});if(!this[0])return{top:0,left:0,height:0,width:0};for(var c=this[0],d=c.offsetWidth,e=c.offsetHeight,f=c.offsetTop,g=c.offsetLeft;c=c.offsetParent;)f+=c.offsetTop,g+=c.offsetLeft;return{top:f,left:g,height:e,width:d}},dim:function(){var a=this[0],b;!a.offsetWidth&&!a.offsetHeight?
(b=void 0,b={position:a.style.position||"",visibility:a.style.visibility||"",display:a.style.display||""},this.first().css({position:"absolute",visibility:"hidden",display:"block"})):b=null;var c=a.offsetWidth,a=a.offsetHeight;b&&this.first().css(b);return{height:a,width:c}},attr:function(a,b){var c=this[0];if(typeof a!="string"&&!(a instanceof String)){for(var d in a)a.hasOwnProperty(d)&&this.attr(d,a[d]);return this}return typeof b=="undefined"?s.test(a)?M.test(a)&&typeof c[a]=="string"?true:c[a]:
(a=="href"||a=="src")&&P.hrefExtended?c[q](a,2):c[q](a):this.each(function(c){s.test(a)?c[a]=x(c,b):c[y](a,x(c,b))})},val:function(a){return typeof a=="string"?this.attr("value",a):this[0].value},removeAttr:function(a){return this.each(function(b){M.test(a)?b[a]=false:b.removeAttribute(a)})},data:function(a,b){var c=this[0],d,g;return typeof b==="undefined"?(d=p(c),typeof a==="undefined"?(e(c.attributes,function(a){(g=(""+a.name).match(i))&&(d[f(g[1])]=n(a.value))}),d):typeof d[a]==="undefined"?d[a]=
n(this.attr("data-"+(a?a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():a))):d[a]):this.each(function(c){p(c)[a]=b})},remove:function(){return this.each(function(a){a[u]&&a[u].removeChild(a)})},empty:function(){return this.each(function(a){for(;a.firstChild;)a.removeChild(a.firstChild)})},detach:function(){return this.map(function(a){return a[u].removeChild(a)})},scrollTop:function(a){return H.call(this,null,a,"y")},scrollLeft:function(a){return H.call(this,a,null,"x")},toggle:function(a){this.each(function(a){a.style.display=
a.offsetWidth||a.offsetHeight?"none":"block"});a&&a();return this}};r.setQueryEngine=function(a){b=a;delete r.setQueryEngine};r.aug=function(a,b){for(var c in a)a.hasOwnProperty(c)&&((b||G.prototype)[c]=a[c])};r.create=function(a){return typeof a=="string"&&a!==""?function(){var b=/^\s*<([^\s>]+)/.exec(a),c=o.createElement("div"),d=[],f=b?m[b[1].toLowerCase()]:null,g=f?f[2]+1:1,h=u,i=P.autoTbody&&f&&f[0]=="<table>"&&!/<tbody/i.test(a);for(c.innerHTML=f?f[0]+a+f[1]:a;g--;)c=c.firstChild;do(!b||c.nodeType==
1)&&(!i||c.tagName.toLowerCase()!="tbody")&&d.push(c);while(c=c.nextSibling);e(d,function(a){a[h]&&a[h].removeChild(a)});return d}():a&&a.nodeName&&a.nodeType==1?[a.cloneNode(true)]:[]};r.doc=function(){var a=r.viewport();return{width:Math.max(o.body.scrollWidth,A.scrollWidth,a.width),height:Math.max(o.body.scrollHeight,A.scrollHeight,a.height)}};r.firstChild=function(a){for(var a=a.childNodes,b=0,c=a&&a.length||0,d;b<c;b++)a[b].nodeType===1&&(d=a[c=b]);return d};r.viewport=function(){return{width:a?
A.clientWidth:self.innerWidth,height:a?A.clientHeight:self.innerHeight}};r.isAncestor="compareDocumentPosition"in A?function(a,b){return(a.compareDocumentPosition(b)&16)==16}:"contains"in A?function(a,b){return a!==b&&a.contains(b)}:function(a,b){for(;b=b[u];)if(b===a)return true;return false};r.noConflict=function(){B.bonzo=N;return this};return r});var $_,addDisplayBox,getDocumentImages,getElementAttributes,getEmbeds,getOption,getPrefix,init,onPostEntry,sanitazise_title,sendFoundData;getPrefix=function(){return"cgt_"};getOption=function(e){return localStorage[getPrefix()+e]};$_=function(e){return bonzo(qwery(e))};addDisplayBox=function(){return $_("body").append('<div class="cgtBox loading"><div class="cgtBoxWrapper"><div id="cgtBoxInner"></div></div></div>')};
sendFoundData=function(e,f,p){var n,h,w,l;l=new XMLHttpRequest;l.open("POST",e,false);h="frm=0&utm_source=chrome-ext";e=function(){var e;e=[];for(n in f)w=f[n],e.push("&"+n+"="+escape(w));return e}();h+=e.join("");l.setRequestHeader("Content-type","application/x-www-form-urlencoded");l.onreadystatechange=function(){if(l.readyState===4)return p&&p(l.responseText)};return l.send(h)};
getDocumentImages=function(){var e,f;e=document.getElementsByTagName("img");f=[];_.each(e,function(e){var n;n=$_(e).dim();if(n.width>30&&n.height>30)return f.push($_(e).attr("src"))});return f};getElementAttributes=function(e){var f,p,n,h,w;f={};w=e.attributes;for(n=0,h=w.length;n<h;n++)e=w[n],p=e.value.replace(/\&/gi,"|"),"flashvars"===e.name&&(f[e.name]=p);return f};
getEmbeds=function(){var e,f,p,n;e=document.getElementsByTagName("embed");p={};n="";f=null;_(e).each(function(e){if(!f||f.attr("height")<$_(e).attr("height")&&f.attr("width")<$_(e).attr("width"))f=$_(e),n=getElementAttributes(e);return $_(e).css({border:"2px solid #C14"})});return f?(p.attrs=n,p.src=f.attr("src"),p.width=f.attr("width"),p.height=f.attr("height"),{href:document.location.href,title:sanitazise_title(document.title),thumbs:getDocumentImages(null).join("|"),video:p}):null};
sanitazise_title=function(e){e=e.replace(document.location.host,"");e=e.replace(document.location.host.toUpperCase(),"");return e=e.replace(String("www"+document.location.host).toUpperCase(),"")};onPostEntry=function(e){console.log("onPostEntry",e);return setTimeout("$_('#cgtBoxInner').html('<p>Ok! done</p>') ^ $_('.cgtBox').addClass('ready')",3E3)};
init=function(){var e;addDisplayBox();return this._best?$_(".cgtBox").remove():(this._best=getEmbeds(this),e=JSON.stringify(this._best,null),this._best!==null&&e?(sendFoundData("http://www.cogetube.com/api/",{jsonData:e,action:"post_entry"},onPostEntry),$_("#cgtBoxInner").html("<p>Saving link</p>")):$_(".cgtBox").remove())};
domReady(function(){return chrome.extension.sendRequest({method:"getAllowedSites"},function(e){var f,p,n,h,e=(e.result||"\n").split("\n")||[];f=false;p=document.location.host;if(e.length>0)for(n=0,h=e.length;n<h;n++)f=e[n],f=f===p||p===String("www."+f+"");if(f)return setTimeout("!init()",2E3)})});
